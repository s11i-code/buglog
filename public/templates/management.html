<h1>Manage bugs</h1>

<alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</alert>
<a ng-click="addBugTypeMode=true">Add new bug type</a>
<table class="table table-striped table-bordered">
    <thead>
    <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Count</th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    <tr data-ng-show="addBugTypeMode">
        <form>
            <td>
                <input type="text" data-ng-model="new_bug_type.name" data-ng-required class="form-control" data-ng-required/>
            </td>
            <td>
                <textarea class="form-control" name="new_bug_type.description" data-ng-model="new_bug_type.description">
                </textarea>
            </td>
            <td> </td>
            <td>
                <button type="submit" data-ng-click="createBugType(new_bug_type); addBugTypeMode = false"
                        class="btn btn-primary">
                    Save
                </button>
                <button type="submit"  data-ng-click="addBugTypeMode = false" class="btn btn-warning">
                    Cancel
                </button>
            </td>
        </form>
    </tr>
    <tr ng-repeat="bug_type in bug_types | orderBy:id">
        <form>
            <td>
                <span data-ng-hide="editMode">{{bug_type.name}} </span>
                <input type="hidden" data-ng-model="bug_type.id" data-ng-required/>
                <input data-ng-show="editMode" type="text" data-ng-model="bug_type.name" data-ng-required
                       class="form-control"/>
            </td>
            <td>
                <span data-ng-hide="editMode">{{bug_type.description}} </span>
                <textarea data-ng-show="editMode" class="form-control" name="bug_type.description"
                          data-ng-model="bug_type.description">
                </textarea>
            </td>
            <td>{{ bug_type.number_of_bug_occurrences }}</td>
            <td>
                <a data-ng-click="editMode = true" data-ng-hide="editMode">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                </a>
                <a data-ng-hide="editMode" data-ng-click="destroyBugType($index, bug_type)">
                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                </a>
                <button type="submit" data-ng-show="editMode" data-ng-click="updateBugType(bug_type); editMode = false"
                        class="btn btn-primary">
                    Save
                </button>
                <button type="submit" data-ng-show="editMode" data-ng-click="editMode = false" class="btn btn-warning">
                    Cancel
                </button>
            </td>
        </form>
    </tr>

    </tbody>
</table>
