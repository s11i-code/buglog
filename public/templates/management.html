<h1>Manage bug types</h1>

<a id='new_bug_type' class="button regular"
   ng-click="addBugTypeMode=true; new_bug_type.name = ''; new_bug_type.description = ''">
    <i class="fa fa-plus"></i>
    New bug type
</a>
<alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</alert>
<table class="table table-striped bug_types">
    <thead>
    <tr>
        <th>Name</th>
        <th>Description</th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    <tr data-ng-show="addBugTypeMode">
        <form>
            <td>
                <input type="text" data-ng-model="new_bug_type.name" data-ng-required class="form-control"
                       data-ng-required/>
            </td>
            <td>
                <textarea class="form-control" name="new_bug_type.description" data-ng-model="new_bug_type.description">
                </textarea>
            </td>
            <td>
                <button type="submit" data-ng-click="createBugType(new_bug_type); addBugTypeMode = false"
                        class="button regular">
                    Save
                </button>
                <button type="submit" data-ng-click="addBugTypeMode = false" class="button cancel">
                    Cancel
                </button>
            </td>
        </form>
    </tr>
    <tr ng-repeat="bug_type in bug_types | filter: { owned_by_current_user: true } | orderBy:'-id'">
        <form>
            <td>
                <span data-ng-hide="editBugTypeMode">{{bug_type.name}} </span>
                <input type="hidden" data-ng-model="bug_type.id" data-ng-required/>
                <input data-ng-show="editBugTypeMode" type="text" data-ng-model="bug_type.name" data-ng-required
                       class="form-control"/>
            </td>
            <td>
                <span data-ng-hide="editBugTypeMode">{{bug_type.description}} </span>
                <textarea data-ng-show="editBugTypeMode" class="form-control" name="bug_type.description"
                          data-ng-model="bug_type.description">
                </textarea>
            </td>
            <td>
                <div data-ng-show="bug_type.owned_by_current_user">
                    <a data-ng-click="editBugTypeMode = true" data-ng-hide="editBugTypeMode">
                        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                    </a>

                    <a data-ng-hide="editBugTypeMode" data-ng-click="destroyBugType($index, bug_type)">
                        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                    </a>
                </div>
                <button type="submit" data-ng-show="editBugTypeMode"
                        data-ng-click="updateBugType(bug_type); editBugTypeMode = false"
                        class="button regular">
                    Save
                </button>
                <button type="submit" data-ng-show="editBugTypeMode"
                        data-ng-click="editBugTypeMode = false; resetBugType($index);"
                        class="button cancel">
                    Cancel
                </button>
            </td>
        </form>
    </tr>

    </tbody>
</table>
